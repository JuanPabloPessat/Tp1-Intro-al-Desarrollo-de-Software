<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cafejo • Carrito</title>
  <link rel="stylesheet" href="carrito.css" />
</head>

<body>
  <!--soperte tecnico-->
  <header id="titulo">
    <div class="container-hero">
      <div class="container hero">
        <div class="customer-support">
          <i class="fa-solid fa-headset"></i>
          <div class="content-customer-support">
            <span class="text">Soporte al cliente</span>
            <span class="number">011 1234-5678</span>
          </div>
        </div>
        <!--NOmbre del local-->
        <div class="container-logo">
          <i class="fa-solid fa-mug-hot"></i>
          <h1 class="logo"><a href="/">Cafejo</a></h1>
        </div>
      </div>
    </div>
    <!--NAVBAR-->
    <div class="container-navbar">
      <nav class="navbar container">

        <ul class="menu">
          <li><a href="/">Inicio</a></li>
          <li><a href="/">Productos</a></li>
          <li><a href="#">Locales</a>
            <ul class="sub-menu">
              <li><a href="https://www.google.com/maps/place/Av.+Paseo+Col%C3%B3n+850,+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6175515,-58.3682068,17z/data=!3m1!4b1!4m6!3m5!1s0x95a334d46ec44845:0x3eb89db">Sede Paseo Colón</a></li>
              <li><a href="https://www.google.com/maps/place/Av.+Gral.+Las+Heras+2214,+C1126+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5885454,-58.3988167,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcca98ed84925f:0x39913f4d2ce53e60!8m2!3d-34.5885498!4d-58.3962364!16s%2Fg%2F11g23543fx?entry=ttu">Sede Las Heras</a></li>
              <li><a href="https://www.google.com/maps/place/Av.+Int.+G%C3%BCiraldes+2160,+C1428+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5452696,-58.4414307,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb448151cbff5:0x1686d8903485aaf3!8m2!3d-34.545274!4d-58.4388504!16s%2Fg%2F11ggzb96l2?entry=ttu">Sede Ciudad Universitaria</a></li>
            </ul>
          </li>
        </ul>

        <form class="search-form">
          <input type="search" placeholder="Buscar..." />
          <button class="btn-search">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
      </nav>
    </div>
  </header>
  <article class="carrito">
    <div class="container-info">
      <h2 class="text-3xl font-bold mb-8">TU CARRITO</h2>
      <p class="text-sm text-muted-foreground">Revisa los productos que has agregado a tu carrito.</p>
      <hr>
    </div>
    <div class="container-products" id='container productos'>
    </div>
    <hr>
    <div class="total">
        <p id="total">TOTAL:</p>
        <p id="price">$0</p>
    </div>
    <button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 w-full">
      Finalizar Compra
    </button>
  </article>
  <footer class="footer">
    <div class="container container-footer">
      <div class="menu-footer">
        <div class="contact-info">
          <p class="title-footer">Información de Contacto</p>
          <ul>
            <li>Teléfono: 011-12345-6789</li>
            <li>Email: cafejo@fi.uba.com</li>
          </ul>
          <div class="social-icons">
            <span class="facebook">
              <i class="fa-brands fa-facebook-f"></i>
            </span>
            <span class="twitter">
              <i class="fa-brands fa-twitter"></i>
            </span>
            <span class="youtube">
              <i class="fa-brands fa-youtube"></i>
            </span>
            <span class="pinterest">
              <i class="fa-brands fa-pinterest-p"></i>
            </span>
            <span class="instagram">
              <i class="fa-brands fa-instagram"></i>
            </span>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>
          Desarrollado por Alumnos de FIUBA
        </p>
        <img src="/front/img/payment.png" alt="Pagos">
      </div>
    </div>
  </footer>
  <script src="https://kit.fontawesome.com/81581fb069.js" crossorigin="anonymous"></script>
  <script>
          
      function response_received(response) {
        return response.json()
      }
  
      function parse_data(content) {
          console.log(content)
          
          
          let container_products = document.getElementById('container productos');
          let total_price = 0;
          let price_label = document.getElementById("price");

        for (let index = 0; index < 4; index++) {
            let product_card = document.createElement("div");
            product_card.setAttribute("class", "card-product");
            product_card.setAttribute("id",`product_${index}`)
        
    
            let item = document.createElement("div");
            item.setAttribute("class", "container-img");
            
            product_card.append(item)
    
            let product_content = document.createElement("div");
            product_content.setAttribute("class", "content-card-product");
    
            let product_name = document.createElement("p");
            product_name.setAttribute("class", "name");
            product_name.innerText = content[index].product_name;

            let price = document.createElement("p");
            price.setAttribute("class", "price");
            let product_price = content[index].product_price;
            price.innerText = `$${content[index].product_price}`
            total_price += content[index].product_price;
    
            let delete_button = document.createElement("button");
            delete_button.setAttribute("class", "remove-cart");
            delete_button.innerText = "x";
            delete_button.addEventListener("click",function(){
              let card_id = `product_${index}`;
              let card_to_remove = document.getElementById(card_id);
              if (card_to_remove) {
                total_price -= product_price
                card_to_remove.remove();
                price_label.innerText = `$${total_price}`;
              }
            })
    
            product_content.append(product_name);
            product_content.append(delete_button);
    
            product_card.append(product_content);
            product_card.append(price);
    
    
    
            container_products.append(product_card);
            price_label.innerText = `$${total_price}`;
          }
        }
  
        function request_error(error) {
          console.log("ERROR")
          console.log(error);
        }
  
  
        fetch("http://localhost:5000/cart/products")
        .then(response_received)
        .then(parse_data)
        .catch(request_error)
  
     </script>

</body>

</html>